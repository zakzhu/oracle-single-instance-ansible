---
# Below is a code example
- name: <r_common_t_common> start oracle universal installer in silent mode
  shell:
  become: yes
  become_method: su
  become_user: oracle
  #become_flags: "-s /bin/sh"
  args:
    cmd: "{{ unpacked_path }}/database/runInstaller -silent -showProgress -waitForCompletion -noconfig -responseFile {{ unpacked_path }}/database/db_inst.rsp"
    #chdir:
    # A filename or (since 2.0) glob pattern.
    # If it already exists, this step *won't* be run.
    #creates:

    # A filename or (since 2.0) glob pattern.
    # If it already exists, this step *will* be run.
    #remove:
  ignore_errors: yes

- name: <r_common_t_common> run orainstRoot.sh and root.sh script
  shell:
  become: yes
  become_method: su
  become_user: root
  #become_flags: "-s /bin/sh"
  args:
    cmd: "{{ item }}"
    #chdir:
    # A filename or (since 2.0) glob pattern.
    # If it already exists, this step *won't* be run.
    #creates:

    # A filename or (since 2.0) glob pattern.
    # If it already exists, this step *will* be run.
    #remove:
  loop:
    - "{{ oracle_base }}/../oraInventory/orainstRoot.sh"
    - "{{ oracle_home }}/root.sh"
  ignore_errors: yes

- name: <r_common_t_common> run net configuration assistant in silent mode
  shell:
  become: yes
  become_method: su
  become_user: oracle
  #become_flags: "-s /bin/sh"
  args:
    cmd: "{{ oracle_home }}/bin/netca -silent -responsefile {{ oracle_home }}/netca.rsp"
    #chdir:
    # A filename or (since 2.0) glob pattern.
    # If it already exists, this step *won't* be run.
    #creates:

    # A filename or (since 2.0) glob pattern.
    # If it already exists, this step *will* be run.
    #remove:
  ignore_errors: yes

- name: <r_common_t_common> run database configuration assistant in silent mode
  shell:
  become: yes
  become_method: su
  become_user: oracle
  #become_flags: "-s /bin/sh"
  args:
    cmd: "{{ oracle_home }}/bin/dbca -silent -createDatabase -responseFile {{ oracle_home }}/dbca.rsp"
    #chdir:
    # A filename or (since 2.0) glob pattern.
    # If it already exists, this step *won't* be run.
    #creates:

    # A filename or (since 2.0) glob pattern.
    # If it already exists, this step *will* be run.
    #remove:
  ignore_errors: yes
